(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{4977:(e,n,s)=>{"use strict";s.r(n),s.d(n,{default:()=>m});var t=s(5155),a=s(2115),c=s(4466),r=s(2723),l=s(4035),i=s(9386),o=s(3420),d=s(46);function u(e){let{incomes:n=[],expenses:s=[]}=e,a=[{name:"Income",value:n.reduce((e,n)=>e+(n.amount||0),0)},{name:"Expenses",value:s.reduce((e,n)=>e+(n.amount||0),0)}],u=["#82ca9d","#8884d8"];return(0,t.jsx)("div",{style:{width:"100%",height:400},children:(0,t.jsx)(c.u,{children:(0,t.jsxs)(r.r,{children:[(0,t.jsx)(l.F,{data:a,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,fill:"#8884d8",label:!0,children:a.map((e,n)=>(0,t.jsx)(i.f,{fill:u[n%u.length]},"cell-".concat(n)))}),(0,t.jsx)(o.m,{}),(0,t.jsx)(d.s,{verticalAlign:"bottom",height:36})]})})})}let h=s(5704).env.NEXT_PUBLIC_API_URL||"https://expenses-tracker-2m0j.onrender.com";function m(){let[e,n]=(0,a.useState)(null),[s,c]=(0,a.useState)([]),[r,l]=(0,a.useState)([]),[i,o]=(0,a.useState)(!0),[d,m]=(0,a.useState)(null);if((0,a.useEffect)(()=>{fetch("".concat(h,"/dashboard"),{credentials:"include"}).then(e=>e.json()).then(e=>{e.user?n(e.user):m("User data not found")}).catch(e=>{console.error(e),m("Failed to load user info")})},[]),(0,a.useEffect)(()=>{e&&(async()=>{try{let[n,s]=await Promise.all([fetch("".concat(h,"/income/user/").concat(e._id),{credentials:"include"}),fetch("".concat(h,"/expenses/user/").concat(e._id),{credentials:"include"})]),t=n.ok?await n.json():[],a=s.ok?await s.json():[];c(t),l(a)}catch(e){console.error(e),m("Failed to load incomes or expenses")}finally{o(!1)}})()},[e]),i)return(0,t.jsx)("p",{children:"Loading..."});if(d)return(0,t.jsx)("p",{children:d});if(!e)return(0,t.jsx)("p",{children:"No user info available."});let x=s.reduce((e,n)=>e+Number(n.amount||0),0),f=r.reduce((e,n)=>e+Number(n.amount||0),0);return(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{children:["Welcome ",e.username," to your dashboard!"]}),(0,t.jsxs)("p",{children:["Total balance: $",x-f]}),(0,t.jsxs)("p",{children:["Total incomes: $",x]}),(0,t.jsxs)("p",{children:["Total expenses: $",f]}),(0,t.jsx)("div",{children:(0,t.jsx)(u,{incomes:s,expenses:r})})]})}},6687:(e,n,s)=>{Promise.resolve().then(s.bind(s,4977))}},e=>{e.O(0,[175,765,441,255,358],()=>e(e.s=6687)),_N_E=e.O()}]);