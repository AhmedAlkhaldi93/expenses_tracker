(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[589],{2484:e=>{e.exports={reportsContainer:"reports_reportsContainer__z0Swc",chartsContainer:"reports_chartsContainer__hHv8j"}},4016:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var a=r(5155),n=r(4466),s=r(6324),c=r(7734),l=r(3697),o=r(3420),d=r(9339),i=r(9386),h=r(4724);function u(e){let{incomes:t}=e,r={};t.forEach(e=>{r[e.source]||(r[e.source]=0),r[e.source]+=Number(e.amount||0)});let u=Object.values(r).reduce((e,t)=>e+t,0),x=Object.entries(r).map(e=>{let[t,r]=e;return{source:t,value:r,percentage:(r/u*100).toFixed(2)}}),j=["#8884d8","#82ca9d","#ffc658","#ff8042","#8dd1e1","#a4de6c","#d0ed57","#8884d8"];return(0,a.jsx)("div",{style:{width:"100%",height:400},children:(0,a.jsx)(n.u,{children:(0,a.jsxs)(s.E,{data:x,layout:"horizontal",margin:{top:20,right:30,left:20,bottom:50},children:[(0,a.jsx)(c.W,{dataKey:"source",type:"category"}),(0,a.jsx)(l.h,{type:"number"}),(0,a.jsx)(o.m,{formatter:e=>"$".concat(e)}),(0,a.jsxs)(d.y,{dataKey:"value",children:[x.map((e,t)=>(0,a.jsx)(i.f,{fill:j[t%j.length]},"cell-".concat(t))),(0,a.jsx)(h.Ze,{dataKey:"percentage",position:"right",content:e=>{let{x:t=0,y:r=0,value:n}=e;return(0,a.jsxs)("text",{x:t,y:Number(r)-5,fill:"#000",textAnchor:"start",children:[n,"%"]})}})]})]})})})}},4709:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(5155),n=r(9580),s=r(4016),c=r(2115),l=r(2484),o=r.n(l);function d(){let[e,t]=(0,c.useState)(null),[r,l]=(0,c.useState)([]),[d,i]=(0,c.useState)([]),[h,u]=(0,c.useState)("day"),[x,j]=(0,c.useState)({start:"",end:""});(0,c.useEffect)(()=>{fetch("http://localhost:5002/dashboard",{credentials:"include"}).then(e=>e.json()).then(e=>t(e.user||null)).catch(e=>console.error(e))},[]),(0,c.useEffect)(()=>{e&&(async()=>{try{let[t,r]=await Promise.all([fetch("http://localhost:5002/income/user/".concat(e._id),{credentials:"include"}),fetch("http://localhost:5002/expenses/user/".concat(e._id),{credentials:"include"})]),a=await t.json(),n=await r.json();l(Array.isArray(a)?a:[]),i(Array.isArray(n)?n:[])}catch(e){console.error(e)}})()},[e]);let m=e=>{let t,r=new Date;switch(h){case"day":(t=new Date(r)).setDate(r.getDate()-1);break;case"week":(t=new Date(r)).setDate(r.getDate()-7);break;case"month":(t=new Date(r)).setMonth(r.getMonth()-1);break;case"year":(t=new Date(r)).setFullYear(r.getFullYear()-1);break;case"custom":t=new Date(x.start);let a=new Date(x.end);return e.filter(e=>{let r=new Date(e.date);return r>=t&&r<=a});default:return e}return e.filter(e=>new Date(e.date)>=t)},p=m(r),y=m(d),f=p.reduce((e,t)=>e+Number(t.amount),0),g=y.reduce((e,t)=>e+Number(t.amount),0);return(0,a.jsxs)("div",{className:o().reportsContainer,children:[(0,a.jsx)("h1",{children:"Reports"}),(0,a.jsxs)("p",{children:["Balance: $",f-g]}),(0,a.jsxs)("p",{children:["Income: $",f]}),(0,a.jsxs)("p",{children:["Expenses: $",g]}),(0,a.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,a.jsx)("button",{onClick:()=>u("day"),children:"Day"}),(0,a.jsx)("button",{onClick:()=>u("week"),children:"Week"}),(0,a.jsx)("button",{onClick:()=>u("month"),children:"Month"}),(0,a.jsx)("button",{onClick:()=>u("year"),children:"Year"}),(0,a.jsx)("button",{onClick:()=>u("custom"),children:"Custom"}),"custom"===h&&(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"date",value:x.start,onChange:e=>j({...x,start:e.target.value})}),(0,a.jsx)("input",{type:"date",value:x.end,onChange:e=>j({...x,end:e.target.value})})]})]}),(0,a.jsxs)("table",{border:1,cellPadding:10,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Income"}),(0,a.jsx)("th",{children:"Expenses"}),(0,a.jsx)("th",{children:"Date"})]})}),(0,a.jsxs)("tbody",{children:[p.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:"+ ".concat(e.amount," $")}),(0,a.jsx)("td",{}),(0,a.jsx)("td",{children:new Date(e.date).toLocaleDateString()})]},"income-".concat(e._id))),y.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{}),(0,a.jsx)("td",{children:"- ".concat(e.amount," $")}),(0,a.jsx)("td",{children:new Date(e.date).toLocaleDateString()})]},"expense-".concat(e._id)))]})]}),(0,a.jsxs)("div",{className:o().chartsContainer,children:[(0,a.jsx)("div",{children:(0,a.jsx)(s.A,{incomes:r})}),(0,a.jsx)("div",{children:(0,a.jsx)(n.A,{expenses:d})})]})]})}},7218:(e,t,r)=>{Promise.resolve().then(r.bind(r,4709))},9580:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var a=r(5155),n=r(4466),s=r(6324),c=r(7734),l=r(3697),o=r(3420),d=r(9339),i=r(9386),h=r(4724);function u(e){let{expenses:t}=e,r={};t.forEach(e=>{r[e.category]||(r[e.category]=0),r[e.category]+=Number(e.amount||0)});let u=Object.values(r).reduce((e,t)=>e+t,0),x=Object.entries(r).map(e=>{let[t,r]=e;return{category:t,value:r,percentage:(r/u*100).toFixed(2)}}),j=["#8884d8","#82ca9d","#ffc658","#ff8042","#8dd1e1","#a4de6c","#d0ed57","#8884d8"];return(0,a.jsx)("div",{style:{width:"100%",height:400},children:(0,a.jsx)(n.u,{children:(0,a.jsxs)(s.E,{data:x,layout:"horizontal",margin:{top:20,right:30,left:20,bottom:50},children:[(0,a.jsx)(c.W,{dataKey:"category",type:"category"}),(0,a.jsx)(l.h,{type:"number"}),(0,a.jsx)(o.m,{formatter:e=>"$".concat(e)}),(0,a.jsxs)(d.y,{dataKey:"value",children:[x.map((e,t)=>(0,a.jsx)(i.f,{fill:j[t%j.length]},"cell-".concat(t))),(0,a.jsx)(h.Ze,{dataKey:"percentage",position:"right",content:e=>{let{x:t=0,y:r=0,value:n}=e;return(0,a.jsxs)("text",{x:t,y:Number(r)-5,fill:"#000",textAnchor:"start",children:[n,"%"]})}})]})]})})})}}},e=>{e.O(0,[791,175,781,441,255,358],()=>e(e.s=7218)),_N_E=e.O()}]);