(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[589],{2484:e=>{e.exports={reportsContainer:"reports_reportsContainer__z0Swc",chartsContainer:"reports_chartsContainer__hHv8j"}},4016:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(5155),a=r(4466),s=r(6324),c=r(7734),l=r(3697),d=r(3420),o=r(9339),i=r(9386),h=r(4724);function u(e){let{incomes:t}=e,r={};t.forEach(e=>{r[e.source]||(r[e.source]=0),r[e.source]+=Number(e.amount||0)});let u=Object.values(r).reduce((e,t)=>e+t,0),x=Object.entries(r).map(e=>{let[t,r]=e;return{source:t,value:r,percentage:(r/u*100).toFixed(2)}}),j=["#8884d8","#82ca9d","#ffc658","#ff8042","#8dd1e1","#a4de6c","#d0ed57","#8884d8"];return(0,n.jsx)("div",{style:{width:"100%",height:400},children:(0,n.jsx)(a.u,{children:(0,n.jsxs)(s.E,{data:x,layout:"horizontal",margin:{top:20,right:30,left:20,bottom:50},children:[(0,n.jsx)(c.W,{dataKey:"source",type:"category"}),(0,n.jsx)(l.h,{type:"number"}),(0,n.jsx)(d.m,{formatter:e=>"$".concat(e)}),(0,n.jsxs)(o.y,{dataKey:"value",children:[x.map((e,t)=>(0,n.jsx)(i.f,{fill:j[t%j.length]},"cell-".concat(t))),(0,n.jsx)(h.Ze,{dataKey:"percentage",position:"right",content:e=>{let{x:t=0,y:r=0,value:a}=e;return(0,n.jsxs)("text",{x:t,y:Number(r)-5,fill:"#000",textAnchor:"start",children:[a,"%"]})}})]})]})})})}},4709:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(5155),a=r(9580),s=r(4016),c=r(2115),l=r(2484),d=r.n(l);let o=r(5704).env.NEXT_PUBLIC_API_URL||"https://expenses-tracker-2m0j.onrender.com";function i(){let[e,t]=(0,c.useState)(null),[r,l]=(0,c.useState)([]),[i,h]=(0,c.useState)([]),[u,x]=(0,c.useState)("day"),[j,m]=(0,c.useState)({start:"",end:""});(0,c.useEffect)(()=>{fetch("".concat(o,"/dashboard"),{credentials:"include"}).then(e=>e.json()).then(e=>t(e.user||null)).catch(e=>console.error(e))},[]),(0,c.useEffect)(()=>{e&&(async()=>{try{let[t,r]=await Promise.all([fetch("".concat(o,"/income/user/").concat(e._id),{credentials:"include"}),fetch("".concat(o,"/expenses/user/").concat(e._id),{credentials:"include"})]),n=await t.json(),a=await r.json();l(Array.isArray(n)?n:[]),h(Array.isArray(a)?a:[])}catch(e){console.error(e)}})()},[e]);let p=e=>{let t,r=new Date;switch(u){case"day":(t=new Date(r)).setDate(r.getDate()-1);break;case"week":(t=new Date(r)).setDate(r.getDate()-7);break;case"month":(t=new Date(r)).setMonth(r.getMonth()-1);break;case"year":(t=new Date(r)).setFullYear(r.getFullYear()-1);break;case"custom":t=new Date(j.start);let n=new Date(j.end);return e.filter(e=>{let r=new Date(e.date);return r>=t&&r<=n});default:return e}return e.filter(e=>new Date(e.date)>=t)},y=p(r),f=p(i),g=y.reduce((e,t)=>e+Number(t.amount),0),b=f.reduce((e,t)=>e+Number(t.amount),0);return(0,n.jsxs)("div",{className:d().reportsContainer,children:[(0,n.jsx)("h1",{children:"Reports"}),(0,n.jsxs)("p",{children:["Balance: $",g-b]}),(0,n.jsxs)("p",{children:["Income: $",g]}),(0,n.jsxs)("p",{children:["Expenses: $",b]}),(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,n.jsx)("button",{onClick:()=>x("day"),children:"Day"}),(0,n.jsx)("button",{onClick:()=>x("week"),children:"Week"}),(0,n.jsx)("button",{onClick:()=>x("month"),children:"Month"}),(0,n.jsx)("button",{onClick:()=>x("year"),children:"Year"}),(0,n.jsx)("button",{onClick:()=>x("custom"),children:"Custom"}),"custom"===u&&(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"date",value:j.start,onChange:e=>m({...j,start:e.target.value})}),(0,n.jsx)("input",{type:"date",value:j.end,onChange:e=>m({...j,end:e.target.value})})]})]}),(0,n.jsxs)("table",{border:1,cellPadding:10,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Income"}),(0,n.jsx)("th",{children:"Expenses"}),(0,n.jsx)("th",{children:"Date"})]})}),(0,n.jsxs)("tbody",{children:[y.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"+ ".concat(e.amount," $")}),(0,n.jsx)("td",{}),(0,n.jsx)("td",{children:new Date(e.date).toLocaleDateString()})]},"income-".concat(e._id))),f.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{}),(0,n.jsx)("td",{children:"- ".concat(e.amount," $")}),(0,n.jsx)("td",{children:new Date(e.date).toLocaleDateString()})]},"expense-".concat(e._id)))]})]}),(0,n.jsxs)("div",{className:d().chartsContainer,children:[(0,n.jsx)("div",{children:(0,n.jsx)(s.A,{incomes:r})}),(0,n.jsx)("div",{children:(0,n.jsx)(a.A,{expenses:i})})]})]})}},7218:(e,t,r)=>{Promise.resolve().then(r.bind(r,4709))},9580:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(5155),a=r(4466),s=r(6324),c=r(7734),l=r(3697),d=r(3420),o=r(9339),i=r(9386),h=r(4724);function u(e){let{expenses:t}=e,r={};t.forEach(e=>{r[e.category]||(r[e.category]=0),r[e.category]+=Number(e.amount||0)});let u=Object.values(r).reduce((e,t)=>e+t,0),x=Object.entries(r).map(e=>{let[t,r]=e;return{category:t,value:r,percentage:(r/u*100).toFixed(2)}}),j=["#8884d8","#82ca9d","#ffc658","#ff8042","#8dd1e1","#a4de6c","#d0ed57","#8884d8"];return(0,n.jsx)("div",{style:{width:"100%",height:400},children:(0,n.jsx)(a.u,{children:(0,n.jsxs)(s.E,{data:x,layout:"horizontal",margin:{top:20,right:30,left:20,bottom:50},children:[(0,n.jsx)(c.W,{dataKey:"category",type:"category"}),(0,n.jsx)(l.h,{type:"number"}),(0,n.jsx)(d.m,{formatter:e=>"$".concat(e)}),(0,n.jsxs)(o.y,{dataKey:"value",children:[x.map((e,t)=>(0,n.jsx)(i.f,{fill:j[t%j.length]},"cell-".concat(t))),(0,n.jsx)(h.Ze,{dataKey:"percentage",position:"right",content:e=>{let{x:t=0,y:r=0,value:a}=e;return(0,n.jsxs)("text",{x:t,y:Number(r)-5,fill:"#000",textAnchor:"start",children:[a,"%"]})}})]})]})})})}}},e=>{e.O(0,[791,175,781,441,255,358],()=>e(e.s=7218)),_N_E=e.O()}]);