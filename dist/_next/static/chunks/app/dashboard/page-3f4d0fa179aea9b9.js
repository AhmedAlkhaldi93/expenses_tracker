(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{4977:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var n=t(5155),a=t(2115),l=t(4466),r=t(2723),c=t(4035),o=t(9386),i=t(3420),d=t(46);function u(e){let{incomes:s=[],expenses:t=[]}=e,a=[{name:"Income",value:s.reduce((e,s)=>e+(s.amount||0),0)},{name:"Expenses",value:t.reduce((e,s)=>e+(s.amount||0),0)}],u=["#82ca9d","#8884d8"];return(0,n.jsx)("div",{style:{width:"100%",height:400},children:(0,n.jsx)(l.u,{children:(0,n.jsxs)(r.r,{children:[(0,n.jsx)(c.F,{data:a,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,fill:"#8884d8",label:!0,children:a.map((e,s)=>(0,n.jsx)(o.f,{fill:u[s%u.length]},"cell-".concat(s)))}),(0,n.jsx)(i.m,{}),(0,n.jsx)(d.s,{verticalAlign:"bottom",height:36})]})})})}function h(){let[e,s]=(0,a.useState)(null),[t,l]=(0,a.useState)([]),[r,c]=(0,a.useState)([]),[o,i]=(0,a.useState)(!0),[d,h]=(0,a.useState)(null);if((0,a.useEffect)(()=>{fetch("http://localhost:5002/dashboard",{credentials:"include"}).then(e=>e.json()).then(e=>{e.user?s(e.user):h("User data not found")}).catch(e=>{console.error(e),h("Failed to load user info")})},[]),(0,a.useEffect)(()=>{e&&(async()=>{try{let[s,t]=await Promise.all([fetch("http://localhost:5002/income/user/".concat(e._id),{credentials:"include"}),fetch("http://localhost:5002/expenses/user/".concat(e._id),{credentials:"include"})]),n=s.ok?await s.json():[],a=t.ok?await t.json():[];l(n),c(a)}catch(e){console.error(e),h("Failed to load incomes or expenses")}finally{i(!1)}})()},[e]),o)return(0,n.jsx)("p",{children:"Loading..."});if(d)return(0,n.jsx)("p",{children:d});if(!e)return(0,n.jsx)("p",{children:"No user info available."});let x=t.reduce((e,s)=>e+Number(s.amount||0),0),f=r.reduce((e,s)=>e+Number(s.amount||0),0);return(0,n.jsxs)("div",{children:[(0,n.jsxs)("h1",{children:["Welcome ",e.username," to your dashboard!"]}),(0,n.jsxs)("p",{children:["Total balance: $",x-f]}),(0,n.jsxs)("p",{children:["Total incomes: $",x]}),(0,n.jsxs)("p",{children:["Total expenses: $",f]}),(0,n.jsx)("div",{children:(0,n.jsx)(u,{incomes:t,expenses:r})})]})}},6687:(e,s,t)=>{Promise.resolve().then(t.bind(t,4977))}},e=>{e.O(0,[175,765,441,255,358],()=>e(e.s=6687)),_N_E=e.O()}]);